{"version":3,"sources":["statics/lazada.png","components/Header.js","statics/promotion.jpg","components/Home.js","components/Chatbox.js","components/Chat.js","App.js","index.js"],"names":["Header","title","history","socket","useHistory","className","onClick","push","window","location","reload","width","src","logo","alt","Home","useState","username","roomId","input","setInput","error","setError","handleChange","e","target","name","value","onSubmit","preventDefault","emit","on","data","alert","for","id","selected","type","placeholder","onChange","promotion","Chatbox","message","currentUser","Chat","setMessage","useEffect","messages","item","off","lastMessage","useRef","current","scrollIntoView","behavior","map","index","content","ref","height","App","io","connect","exact","path","component","props","match","params","ReactDOM","render","document","getElementById"],"mappings":"iKAAe,MAA0B,mC,OC6B1BA,EA1BA,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,MACVC,GAD8B,EAAbC,OACPC,eAMhB,OACE,qBAAKC,UAAU,6DAAf,SACGJ,EACC,sBAAKI,UAAU,mCAAf,UACE,wBAAQA,UAAU,iCAAiCC,QAT7C,WACZJ,EAAQK,KAAK,KAEbC,OAAOC,SAASC,UAMV,kBAGA,oBAAIL,UAAU,yBAAd,SAAwCJ,OAG1C,qBAAKI,UAAU,mCAAf,SACE,qBAAKM,MAAO,IAAKC,IAAKC,EAAMC,IAAI,c,wBCrB3B,MAA0B,sCC4E1BC,EAxEF,SAAC,GAAgB,IAAdZ,EAAa,EAAbA,OACd,EAA0Ba,mBAAS,CACjCC,SAAU,GACVC,OAAQ,KAFV,mBAAOC,EAAP,KAAcC,EAAd,KAIA,EAA0BJ,qBAA1B,mBAAOK,EAAP,KAAcC,EAAd,KACMpB,EAAUE,cACVmB,EAAe,SAACC,GACpB,MAAwBA,EAAEC,OAAlBC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACdP,EAAS,2BAAKD,GAAN,kBAAcO,EAAOC,MAiB/B,OACE,qBAAKtB,UAAU,qDAAf,SACE,uBACEuB,SAjBW,SAACJ,GAChBA,EAAEK,iBACqB,KAAnBV,EAAMF,UAAoC,KAAjBE,EAAMD,QACjCf,EAAO2B,KAAK,WAAYX,GACxBhB,EAAO4B,GAAG,UAAU,SAACC,GACnBA,EAAKd,OACDhB,EAAQK,KAAR,gBAAsByB,EAAKd,OAA3B,YAAqCc,EAAKf,WAC1CK,EAASU,OAGfC,MAAM,mCAQJ5B,UAAU,iDAFZ,UAIE,sBAAKA,UAAU,0BAAf,UACE,uBAAO6B,IAAI,OAAX,uCACA,yBAAQC,GAAG,OAAO9B,UAAU,yBAA5B,UACE,wBAAQsB,MAAM,MAAd,qDACA,wBAAQA,MAAM,MAAd,oEACA,wBAAQA,MAAM,OAAd,uFAGA,wBAAQA,MAAM,SAASS,UAAQ,EAA/B,8CAIF,uBAAOF,IAAI,OAAX,8DACA,uBACEG,KAAK,OACLC,YAAY,WACZZ,KAAK,WACLrB,UAAU,yBACVkC,SAAUhB,IAEZ,uBAAOW,IAAI,OAAX,gCACA,uBACEG,KAAK,OACLC,YAAY,SACZZ,KAAK,SACLrB,UAAU,yBACVkC,SAAUhB,EACVI,MAAM,sBAER,qBAAKhB,MAAO,IAAKC,IAAK4B,EAAW1B,IAAI,cACpCO,GAAS,4BAAIA,OAEhB,wBAAQgB,KAAK,SAAShC,UAAU,qCAAhC,4C,gBCpDOoC,EAhBC,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,QAASzB,EAA4B,EAA5BA,SAAU0B,EAAkB,EAAlBA,YACpC,OACE,qBAAKtC,UAAU,WAAf,SACE,sBAAKA,UAAS,UAAKsC,EAAc,eAAiB,eAApC,SAAd,UACE,6BAAKA,GAAe1B,IACpB,qBACEZ,UAAS,UAAKsC,EAAc,oBAAsB,UAAzC,0CADX,SAIGD,UCgFIE,EApFF,SAAC,GAAkC,IAAhC3B,EAA+B,EAA/BA,SAAUC,EAAqB,EAArBA,OAAQf,EAAa,EAAbA,OAChC,EAA8Ba,mBAAS,IAAvC,mBAAO0B,EAAP,KAAgBG,EAAhB,KACA,EAA0B7B,mBAAS,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KAGA0B,qBAAU,WACR3C,EAAO4B,GAAG,cAAc,YAAmB,IAAhBgB,EAAe,EAAfA,SACzBF,EAAWE,QAEZ,IAGHD,qBAAU,WAIR,OAHA3C,EAAO4B,GAAG,WAAW,YAAmB,IAAhBgB,EAAe,EAAfA,SACtBF,GAAW,SAACG,GAAD,4BAAcA,GAAd,CAAoBD,UAE1B5C,EAAO8C,IAAI,cACjB,CAAC9C,IAGJ,IAQM+C,EAAcC,iBAAO,MAM3B,OAFAL,qBAHuB,WACrBI,EAAYE,QAAQC,eAAe,CAAEC,SAAU,aAEvB,CAACZ,IAGzB,sBAAKrC,UAAU,oEAAf,UACE,cAAC,EAAD,CAAQJ,MAAOiB,EAAQf,OAAQA,IAC/B,sBAAKE,UAAU,0BAAf,iBAEGqC,QAFH,IAEGA,OAFH,EAEGA,EAASa,KAAI,SAACP,EAAMQ,GACnB,OAAQ,OAAJR,QAAI,IAAJA,OAAA,EAAAA,EAAM/B,YAAaA,EAEnB,cAAC,EAAD,CAEEyB,QAAO,OAAEM,QAAF,IAAEA,OAAF,EAAEA,EAAMS,QACfxC,SAAQ,OAAE+B,QAAF,IAAEA,OAAF,EAAEA,EAAM/B,SAChB0B,aAAW,GAHNa,GAQP,cAAC,EAAD,CAEEd,QAAO,OAAEM,QAAF,IAAEA,OAAF,EAAEA,EAAMS,QACfxC,SAAQ,OAAE+B,QAAF,IAAEA,OAAF,EAAEA,EAAM/B,UAFXuC,MASb,qBAAKE,IAAKR,OAEZ,qBAAK7C,UAAU,0BAAf,SACE,sBAAKA,UAAU,qDAAf,UACE,uBACEgC,KAAK,OACLC,YAAY,kBACZC,SAAU,SAACf,GAAD,OAAOJ,EAASI,EAAEC,OAAOE,QACnCA,MAAOR,EACPd,UAAU,uCAEZ,wBACEC,QArDU,WACJ,KAAVa,GACFhB,EAAO2B,KAAK,OAAQX,GACpBC,EAAS,KACJa,MAAM,oBAkDL5B,UAAU,qCAFZ,SAIE,cAAC,IAAD,CAAaM,MAAO,GAAIgD,OAAQ,gBClD7BC,EAxBH,WACV,IAAMzD,EAAS0D,IAAGC,QAAQ,KAU1B,OACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,CAAM7D,OAAQA,OAEhB,cAAC,IAAD,CAAO6D,KAAK,0BAA0BC,UAhB3B,SAACC,GAChB,OACE,cAAC,EAAD,CACEjD,SAAUiD,EAAMC,MAAMC,OAAOnD,SAC7BC,OAAQgD,EAAMC,MAAMC,OAAOlD,OAC3Bf,OAAQA,a,uBCThBkE,EAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.12c55fb0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/lazada.942e4b88.png\";","import { useHistory } from 'react-router-dom';\nimport logo from '../statics/lazada.png';\n\nconst Header = ({ title, socket }) => {\n  const history = useHistory();\n  const leave = () => {\n    history.push('/');\n    // renew socket id . Bugs\n    window.location.reload();\n  };\n  return (\n    <div className='fixed top-0 left-0 w-screen text-center p-3 z-50 bg-orange'>\n      {title ? (\n        <div className='flex justify-center items-center'>\n          <button className='absolute left-4 text-green-500' onClick={leave}>\n            Exit\n          </button>\n          <h2 className='font-semibold text-3xl'>{title}</h2>\n        </div>\n      ) : (\n        <div className='flex items-center justify-center'>\n          <img width={150} src={logo} alt='logo' />\n          {/* <h2 className='font-semibold text-3xl'>Join Chatroom</h2> */}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/promotion.0a134e31.jpg\";","import { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport promotion from '../statics/promotion.jpg';\n\nconst Home = ({ socket }) => {\n  const [input, setInput] = useState({\n    username: '',\n    roomId: '',\n  });\n  const [error, setError] = useState();\n  const history = useHistory();\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setInput({ ...input, [name]: value });\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (input.username !== '' && input.roomId !== '') {\n      socket.emit('joinRoom', input);\n      socket.on('joined', (data) => {\n        data.roomId\n          ? history.push(`/chat/${data.roomId}/${data.username}`)\n          : setError(data);\n      });\n    } else {\n      alert('Username & RoomId not be empty');\n    }\n  };\n\n  return (\n    <div className='flex justify-center h-screen pt-20 pb-36 bg-orange'>\n      <form\n        onSubmit={onSubmit}\n        className='flex flex-col justify-between w-11/12 max-w-md'\n      >\n        <div className='flex flex-col space-y-4'>\n          <label for='bank'>Chọn Ngân Hàng</label>\n          <select id='bank' className='bg-tint p-3 rounded-md'>\n            <option value='ACB'>ACB - Ngân Hàng TMCP Á Châu</option>\n            <option value='VCB'>VCB - Ngân Hàng TMCP Ngoại Thương</option>\n            <option value='TECH'>\n              Techcombank - Ngân Hàng TMCP Kỹ thương Việt Nam\n            </option>\n            <option value='select' selected>\n              --Chọn Ngân Hàng--\n            </option>\n          </select>\n          <label for='bank'>Tên đăng nhập Internet Banking</label>\n          <input\n            type='text'\n            placeholder='Username'\n            name='username'\n            className='bg-tint p-3 rounded-md'\n            onChange={handleChange}\n          />\n          <label for='bank'>Mật Khẩu</label>\n          <input\n            type='text'\n            placeholder='RoomID'\n            name='roomId'\n            className='bg-tint p-3 rounded-md'\n            onChange={handleChange}\n            value='Nguyên-Banking'\n          />\n          <img width={200} src={promotion} alt='promotion' />\n          {error && <p>{error}</p>}\n        </div>\n        <button type='submit' className='bg-box text-white p-3 rounded-full'>\n          Đăng Nhập\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Home;\n","const Chatbox = ({ message, username, currentUser }) => {\n  return (\n    <div className=\"w-screen\">\n      <div className={`${currentUser ? \"mr-6 ml-auto\" : \"ml-6 mr-auto\"} w-60`}>\n        <p>{!currentUser && username}</p>\n        <div\n          className={`${currentUser ? \"bg-box text-white\" : \"bg-tint\"}\n          p-3 rounded-lg break-words`}\n        >\n          {message}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chatbox;\n","import { useState, useEffect, useRef } from \"react\";\nimport Header from \"./Header\";\nimport { ArrowUpIcon } from \"@heroicons/react/outline\";\nimport Chatbox from \"./Chatbox\";\n\nconst Chat = ({ username, roomId, socket }) => {\n  const [message, setMessage] = useState([]);\n  const [input, setInput] = useState(\"\");\n\n  // First render to fetch all room's messages\n  useEffect(() => {\n    socket.on(\"oldmessage\", ({ messages }) => {\n      setMessage(messages);\n    });\n  }, []);\n\n  // Call every socket change\n  useEffect(() => {\n    socket.on(\"message\", ({ messages }) => {\n      setMessage((item) => [...item, messages]);\n    });\n    return socket.off(\"messsage\");\n  }, [socket]);\n\n  // Trigger when user push the button\n  const sendMessage = () => {\n    if (input !== \"\") {\n      socket.emit(\"chat\", input);\n      setInput(\"\");\n    } else alert(\"Input something\");\n  };\n\n  // Scroll to Bottom Process\n  const lastMessage = useRef(null);\n  const scrollToBottom = () => {\n    lastMessage.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n  useEffect(scrollToBottom, [message]);\n\n  return (\n    <div className=\"flex flex-1 justify-center py-20 scrollbar-hide overflow-y-scroll\">\n      <Header title={roomId} socket={socket} />\n      <div className=\"flex flex-col space-y-6\">\n        {/* show messages from user */}\n        {message?.map((item, index) => {\n          if (item?.username === username) {\n            return (\n              <Chatbox\n                key={index}\n                message={item?.content}\n                username={item?.username}\n                currentUser\n              />\n            );\n          } else {\n            return (\n              <Chatbox\n                key={index}\n                message={item?.content}\n                username={item?.username}\n              />\n            );\n          }\n        })}\n\n        {/* Scroll to bottom */}\n        <div ref={lastMessage} />\n      </div>\n      <div className=\"fixed bottom-8 w-screen\">\n        <div className=\"flex justify-between bg-tint rounded-full p-2 mx-3\">\n          <input\n            type=\"text\"\n            placeholder=\"Message here...\"\n            onChange={(e) => setInput(e.target.value)}\n            value={input}\n            className=\"outline-none bg-tint px-2 w-screen\"\n          />\n          <button\n            onClick={sendMessage}\n            className=\"rounded-full bg-box text-white p-2\"\n          >\n            <ArrowUpIcon width={20} height={20} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport React from \"react\";\nimport io from \"socket.io-client\";\nimport Header from \"./components/Header\";\nimport Home from \"./components/Home\";\nimport Chat from \"./components/Chat\";\n\nconst App = () => {\n  const socket = io.connect(\"/\");\n  const MainChat = (props) => {\n    return (\n      <Chat\n        username={props.match.params.username}\n        roomId={props.match.params.roomId}\n        socket={socket}\n      />\n    );\n  };\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <Header />\n          <Home socket={socket} />\n        </Route>\n        <Route path=\"/chat/:roomId/:username\" component={MainChat} />\n      </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n","import App from \"./App\";\nimport \"./index.css\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}