(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{90:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(21),s=n(2),a=n(0),o=n(49),r=n.n(o),l=n(1),i=function(e){var t=e.title,n=(e.socket,Object(s.f)());return Object(l.jsx)("div",{className:"fixed top-0 left-0 w-screen text-center p-3 z-50 bg-white",children:t?Object(l.jsxs)("div",{className:"flex justify-center items-center",children:[Object(l.jsx)("button",{className:"absolute left-4 text-green-500",onClick:function(){n.push("/"),window.location.reload()},children:"Exit"}),Object(l.jsx)("h2",{className:"font-semibold text-3xl",children:t})]}):Object(l.jsx)("h2",{className:"font-semibold text-3xl",children:"Join Chatroom"})})},u=n(22),j=n(31),m=n(14),d=function(e){var t=e.socket,n=Object(a.useState)({username:"",roomId:""}),c=Object(m.a)(n,2),o=c[0],r=c[1],i=Object(a.useState)(),d=Object(m.a)(i,2),b=d[0],x=d[1],f=Object(s.f)(),h=function(e){var t=e.target,n=t.name,c=t.value;r(Object(j.a)(Object(j.a)({},o),{},Object(u.a)({},n,c)))};return Object(l.jsx)("div",{className:"flex justify-center h-screen pt-20 pb-36",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==o.username&&""!==o.roomId?(t.emit("joinRoom",o),t.on("joined",(function(e){e.roomId?f.push("/chat/".concat(e.roomId,"/").concat(e.username)):x(e)}))):alert("Username & RoomId not be empty")},className:"flex flex-col justify-between w-11/12 max-w-md",children:[Object(l.jsxs)("div",{className:"flex flex-col space-y-4",children:[Object(l.jsx)("input",{type:"text",placeholder:"Username",name:"username",className:"bg-tint p-3 rounded-md",onChange:h}),Object(l.jsx)("input",{type:"text",placeholder:"RoomID",name:"roomId",className:"bg-tint p-3 rounded-md",onChange:h}),b&&Object(l.jsx)("p",{children:b})]}),Object(l.jsx)("button",{type:"submit",className:"bg-box text-white p-3 rounded-full",children:"JOIN"})]})})},b=n(53),x=n(52),f=function(e){var t=e.message,n=e.username,c=e.currentUser;return Object(l.jsx)("div",{className:"w-screen",children:Object(l.jsxs)("div",{className:"".concat(c?"mr-6 ml-auto":"ml-6 mr-auto"," w-60"),children:[Object(l.jsx)("p",{children:!c&&n}),Object(l.jsx)("div",{className:"".concat(c?"bg-box text-white":"bg-tint","\n          p-3 rounded-lg break-words"),children:t})]})})},h=function(e){var t=e.username,n=e.roomId,c=e.socket,s=Object(a.useState)([]),o=Object(m.a)(s,2),r=o[0],u=o[1],j=Object(a.useState)(""),d=Object(m.a)(j,2),h=d[0],O=d[1];Object(a.useEffect)((function(){c.on("oldmessage",(function(e){var t=e.messages;u(t)}))}),[]),Object(a.useEffect)((function(){return c.on("message",(function(e){var t=e.messages;u((function(e){return[].concat(Object(b.a)(e),[t])}))})),c.off("messsage")}),[c]);var p=Object(a.useRef)(null);return Object(a.useEffect)((function(){p.current.scrollIntoView({behavior:"smooth"})}),[r]),Object(l.jsxs)("div",{className:"flex flex-1 justify-center py-20 scrollbar-hide overflow-y-scroll",children:[Object(l.jsx)(i,{title:n,socket:c}),Object(l.jsxs)("div",{className:"flex flex-col space-y-6",children:[null===r||void 0===r?void 0:r.map((function(e,n){return(null===e||void 0===e?void 0:e.username)===t?Object(l.jsx)(f,{message:null===e||void 0===e?void 0:e.content,username:null===e||void 0===e?void 0:e.username,currentUser:!0},n):Object(l.jsx)(f,{message:null===e||void 0===e?void 0:e.content,username:null===e||void 0===e?void 0:e.username},n)})),Object(l.jsx)("div",{ref:p})]}),Object(l.jsx)("div",{className:"fixed bottom-8 w-screen",children:Object(l.jsxs)("div",{className:"flex justify-between bg-tint rounded-full p-2 mx-3",children:[Object(l.jsx)("input",{type:"text",placeholder:"Message here...",onChange:function(e){return O(e.target.value)},value:h,className:"outline-none bg-tint px-2 w-screen"}),Object(l.jsx)("button",{onClick:function(){""!==h?(c.emit("chat",h),O("")):alert("Input something")},className:"rounded-full bg-box text-white p-2",children:Object(l.jsx)(x.a,{width:20,height:20})})]})})]})},O=function(){var e=r.a.connect("/");return Object(l.jsx)(c.a,{children:Object(l.jsxs)(s.c,{children:[Object(l.jsxs)(s.a,{exact:!0,path:"/",children:[Object(l.jsx)(i,{}),Object(l.jsx)(d,{socket:e})]}),Object(l.jsx)(s.a,{path:"/chat/:roomId/:username",component:function(t){return Object(l.jsx)(h,{username:t.match.params.username,roomId:t.match.params.roomId,socket:e})}})]})})},p=(n(90),n(51));n.n(p).a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.19456dfc.chunk.js.map