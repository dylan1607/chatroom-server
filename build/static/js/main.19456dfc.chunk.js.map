{"version":3,"sources":["components/Header.js","components/Home.js","components/Chatbox.js","components/Chat.js","App.js","index.js"],"names":["Header","title","history","socket","useHistory","className","onClick","push","window","location","reload","Home","useState","username","roomId","input","setInput","error","setError","handleChange","e","target","name","value","onSubmit","preventDefault","emit","on","data","alert","type","placeholder","onChange","Chatbox","message","currentUser","Chat","setMessage","useEffect","messages","item","off","lastMessage","useRef","current","scrollIntoView","behavior","map","index","content","ref","width","height","App","io","connect","exact","path","component","props","match","params","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19456dfc.chunk.js","sourcesContent":["import { useHistory } from \"react-router-dom\";\n\nconst Header = ({ title, socket }) => {\n  const history = useHistory();\n  const leave = () => {\n    history.push(\"/\");\n    // renew socket id . Bugs \n    window.location.reload();\n  };\n  return (\n    <div className=\"fixed top-0 left-0 w-screen text-center p-3 z-50 bg-white\">\n      {title ? (\n        <div className=\"flex justify-center items-center\">\n          <button className=\"absolute left-4 text-green-500\" onClick={leave}>\n            Exit\n          </button>\n          <h2 className=\"font-semibold text-3xl\">{title}</h2>\n        </div>\n      ) : (\n        <h2 className=\"font-semibold text-3xl\">Join Chatroom</h2>\n      )}\n    </div>\n  );\n};\n\nexport default Header;\n","import { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Home = ({ socket }) => {\n  const [input, setInput] = useState({\n    username: \"\",\n    roomId: \"\",\n  });\n  const [error, setError] = useState();\n  const history = useHistory();\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setInput({ ...input, [name]: value });\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (input.username !== \"\" && input.roomId !== \"\") {\n      socket.emit(\"joinRoom\", input);\n      socket.on(\"joined\", (data) => {\n        data.roomId\n          ? history.push(`/chat/${data.roomId}/${data.username}`)\n          : setError(data);\n      });\n    } else {\n      alert(\"Username & RoomId not be empty\");\n    }\n  };\n\n  return (\n    <div className=\"flex justify-center h-screen pt-20 pb-36\">\n      <form\n        onSubmit={onSubmit}\n        className=\"flex flex-col justify-between w-11/12 max-w-md\"\n      >\n        <div className=\"flex flex-col space-y-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            name=\"username\"\n            className=\"bg-tint p-3 rounded-md\"\n            onChange={handleChange}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"RoomID\"\n            name=\"roomId\"\n            className=\"bg-tint p-3 rounded-md\"\n            onChange={handleChange}\n          />\n          {error && <p>{error}</p>}\n        </div>\n        <button type=\"submit\" className=\"bg-box text-white p-3 rounded-full\">\n          JOIN\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default Home;\n","const Chatbox = ({ message, username, currentUser }) => {\n  return (\n    <div className=\"w-screen\">\n      <div className={`${currentUser ? \"mr-6 ml-auto\" : \"ml-6 mr-auto\"} w-60`}>\n        <p>{!currentUser && username}</p>\n        <div\n          className={`${currentUser ? \"bg-box text-white\" : \"bg-tint\"}\n          p-3 rounded-lg break-words`}\n        >\n          {message}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chatbox;\n","import { useState, useEffect, useRef } from \"react\";\nimport Header from \"./Header\";\nimport { ArrowUpIcon } from \"@heroicons/react/outline\";\nimport Chatbox from \"./Chatbox\";\n\nconst Chat = ({ username, roomId, socket }) => {\n  const [message, setMessage] = useState([]);\n  const [input, setInput] = useState(\"\");\n\n  // First render to fetch all room's messages\n  useEffect(() => {\n    socket.on(\"oldmessage\", ({ messages }) => {\n      setMessage(messages);\n    });\n  }, []);\n\n  // Call every socket change\n  useEffect(() => {\n    socket.on(\"message\", ({ messages }) => {\n      setMessage((item) => [...item, messages]);\n    });\n    return socket.off(\"messsage\");\n  }, [socket]);\n\n  // Trigger when user push the button\n  const sendMessage = () => {\n    if (input !== \"\") {\n      socket.emit(\"chat\", input);\n      setInput(\"\");\n    } else alert(\"Input something\");\n  };\n\n  // Scroll to Bottom Process\n  const lastMessage = useRef(null);\n  const scrollToBottom = () => {\n    lastMessage.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n  useEffect(scrollToBottom, [message]);\n\n  return (\n    <div className=\"flex flex-1 justify-center py-20 scrollbar-hide overflow-y-scroll\">\n      <Header title={roomId} socket={socket} />\n      <div className=\"flex flex-col space-y-6\">\n        {/* show messages from user */}\n        {message?.map((item, index) => {\n          if (item?.username === username) {\n            return (\n              <Chatbox\n                key={index}\n                message={item?.content}\n                username={item?.username}\n                currentUser\n              />\n            );\n          } else {\n            return (\n              <Chatbox\n                key={index}\n                message={item?.content}\n                username={item?.username}\n              />\n            );\n          }\n        })}\n\n        {/* Scroll to bottom */}\n        <div ref={lastMessage} />\n      </div>\n      <div className=\"fixed bottom-8 w-screen\">\n        <div className=\"flex justify-between bg-tint rounded-full p-2 mx-3\">\n          <input\n            type=\"text\"\n            placeholder=\"Message here...\"\n            onChange={(e) => setInput(e.target.value)}\n            value={input}\n            className=\"outline-none bg-tint px-2 w-screen\"\n          />\n          <button\n            onClick={sendMessage}\n            className=\"rounded-full bg-box text-white p-2\"\n          >\n            <ArrowUpIcon width={20} height={20} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport React from \"react\";\nimport io from \"socket.io-client\";\nimport Header from \"./components/Header\";\nimport Home from \"./components/Home\";\nimport Chat from \"./components/Chat\";\n\nconst App = () => {\n  const socket = io.connect(\"/\");\n  const MainChat = (props) => {\n    return (\n      <Chat\n        username={props.match.params.username}\n        roomId={props.match.params.roomId}\n        socket={socket}\n      />\n    );\n  };\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          <Header />\n          <Home socket={socket} />\n        </Route>\n        <Route path=\"/chat/:roomId/:username\" component={MainChat} />\n      </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n","import App from \"./App\";\nimport \"./index.css\";\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\n\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}